// <auto-generated/>
#nullable enable
using System;
using System.Threading;
using System.Threading.Tasks;
using FluentAssertions;
using Flurl.Http;
using Flurl.Http.Testing;
using Microsoft.Extensions.Logging.Abstractions;
using ApiConsoleClient.ApiClient;
using ApiConsoleClient.Models;
using Xunit;

namespace ApiConsoleClient.Tests.Generated;
public sealed class GetInboundforecastGroupTests
{
    [Fact]
    public async Task GetInboundforecastGroup_HappyPath()
    {
        using var http = new HttpTest();
        http.RespondWithJson(System.Array.Empty<MontaRESTApiModels_InboundForecast_InboundForecastGroup>());
        var client = new ApiConsoleClient.ApiClient.ApiClient(new NullLogger<ApiConsoleClient.ApiClient.ApiClient>(), new ApiConsoleClient.ApiClient.ApiClientOptions { BaseUrl = new Uri("https://api.test") }, new ApiConsoleClient.Tests.NoAuth());
        var req = new GetInboundforecastGroupRequest { CreatedSince = new System.DateTimeOffset(2000,1,2,3,4,5, System.TimeSpan.Zero), CreatedUntil = new System.DateTimeOffset(2000,1,2,3,4,5, System.TimeSpan.Zero), Approved = true, Sku = "x", Page = 1, PageSize = 1, GetCountOnly = true, Reference = "x" };
        var result = await client.GetInboundforecastGroupAsync(req, System.Threading.CancellationToken.None);
        http.ShouldHaveCalled("https://api.test/inboundforecast/group?created_since=2000-01-02T03%3A04%3A05%2B00%3A00&created_until=2000-01-02T03%3A04%3A05%2B00%3A00&approved=true&sku=x&page=1&page_size=1&get_count_only=true&reference=x").WithVerb(System.Net.Http.HttpMethod.Get);
    }
    [Fact]
    public async Task GetInboundforecastGroup_ErrorPath()
    {
        using var http = new HttpTest();
        http.RespondWith("{\"type\":\"https://example/problem\",\"title\":\"Bad Request\"}", 400, new System.Collections.Generic.Dictionary<string,string> { ["Content-Type"] = "application/problem+json" });
        var client = new ApiConsoleClient.ApiClient.ApiClient(new NullLogger<ApiConsoleClient.ApiClient.ApiClient>(), new ApiConsoleClient.ApiClient.ApiClientOptions { BaseUrl = new Uri("https://api.test") }, new ApiConsoleClient.Tests.NoAuth());
        var req = new GetInboundforecastGroupRequest { CreatedSince = new System.DateTimeOffset(2000,1,2,3,4,5, System.TimeSpan.Zero), CreatedUntil = new System.DateTimeOffset(2000,1,2,3,4,5, System.TimeSpan.Zero), Approved = true, Sku = "x", Page = 1, PageSize = 1, GetCountOnly = true, Reference = "x" };
        var act = async () => await client.GetInboundforecastGroupAsync(req, System.Threading.CancellationToken.None);
        await act.Should().ThrowAsync<ApiConsoleClient.ApiClient.ApiException>();
    }
}
